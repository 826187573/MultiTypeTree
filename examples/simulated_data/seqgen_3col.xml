<?xml version="1.0" encoding="UTF-8"?>
<beast version="2.0"
       namespace="beast.core:beast.util:beast.evolution.alignment:beast.evolution.sitemodel:beast.evolution.substitutionmodel:beast.app.seqgen:hamlet.beast">

  <alignment spec="Alignment" id="alignment"
	     dataType="nucleotide">
    <sequence spec="Sequence" taxon="t1" value="?" />
    <sequence spec="Sequence" taxon="t2" value="?" />
    <sequence spec="Sequence" taxon="t3" value="?" />
    <sequence spec="Sequence" taxon="t4" value="?" />
    <sequence spec="Sequence" taxon="t5" value="?" />
    <sequence spec="Sequence" taxon="t6" value="?" />
    <sequence spec="Sequence" taxon="t7" value="?" />
    <sequence spec="Sequence" taxon="t8" value="?" />
    <sequence spec="Sequence" taxon="t9" value="?" />
    <sequence spec="Sequence" taxon="t10" value="?" />
  </alignment>


  <siteModel spec="SiteModel" id="defaultSiteModel" mutationRate="0.1">
    <substModel spec="JukesCantor"/>
  </siteModel>


  <tree spec="HamletTree" id="tree">
    <model spec='InheritanceModel'>
      <populationType spec='PopulationType' typeName='X' dim="3" id='X'/>
      <reactionGroup spec='InheritanceReactionGroup' reactionGroupName='Coalescence'>
	<reaction spec='InheritanceReaction' rate="1.0">
	  2X[0]:1 -> X[0]:1
	</reaction>
	<reaction spec='InheritanceReaction' rate="1.0">
	  2X[1]:1 -> X[1]:1
	</reaction>
	<reaction spec='InheritanceReaction' rate="1.0">
	  2X[2]:1 -> X[2]:1
	</reaction>
      </reactionGroup>
      <reactionGroup spec='InheritanceReactionGroup' reactionGroupName='Migration'>
	<reaction spec='InheritanceReaction' rate="0.25">
	  X[0] -> X[1]
	</reaction>
	<reaction spec='InheritanceReaction' rate="0.25">
	  X[0] -> X[2]
	</reaction>
	<reaction spec='InheritanceReaction' rate="0.25">
	  X[1] -> X[0]
	</reaction>
	<reaction spec='InheritanceReaction' rate="0.25">
	  X[1] -> X[2]
	</reaction>
	<reaction spec='InheritanceReaction' rate="0.25">
	  X[2] -> X[0]
	</reaction>
	<reaction spec='InheritanceReaction' rate="0.25">
	  X[2] -> X[1]
	</reaction>
      </reactionGroup>
    </model>

    <alignment idref='alignment'/>

    <initialState spec='InitState'>
      <lineageSeed spec='Individual' label="t1">
	<population spec='Population' type="@X" location="1"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t2">
	<population spec='Population' type="@X" location="1"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t3">
	<population spec='Population' type="@X" location="1"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t4">
	<population spec='Population' type="@X" location="0"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t5">
	<population spec='Population' type="@X" location="0"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t6">
	<population spec='Population' type="@X" location="0"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t7">
	<population spec='Population' type="@X" location="0"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t8">
	<population spec='Population' type="@X" location="2"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t9">
	<population spec='Population' type="@X" location="2"/>
      </lineageSeed>
      <lineageSeed spec='Individual' label="t10">
	<population spec='Population' type="@X" location="2"/>
      </lineageSeed>
    </initialState>

    <lineageEndCondition spec='LineageEndCondition' nLineages="1"/>

    <output spec='NexusOutput' fileName='true_tree_3col.nexus' reverseTime='true'/>
  </tree>

  <run spec="SequenceSimulator"
       data="@alignment"
       tree="@tree"
       sequencelength="2000"
       siteModel="@defaultSiteModel"
       outputFileName="data_3col.xml"/>

</beast>